---
title: Windows éƒ¨ç½² Nekro Agent for Hyper-V
description: åœ¨ Windows ç³»ç»Ÿä¸Šä½¿ç”¨ Hyper-V éƒ¨ç½² Nekro Agent çš„è¯¦ç»†æ­¥éª¤
---

# Windows for Hyper-V éƒ¨ç½²æ•™ç¨‹

æœ¬æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨åœ¨ Windows ç³»ç»Ÿä¸Šéƒ¨ç½² Nekro Agentã€‚

## ğŸŒˆ ç¯å¢ƒå‡†å¤‡

ç”±äº Nekro Agent åŸºäº Docker è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨ Windows ä¸Šå®‰è£… Hyper-Vã€‚

### å®‰è£… Hyper-V

å¯ç”¨ Hyper-V åœ¨ Windows ä¸Šåˆ›å»ºè™šæ‹Ÿæœºã€‚ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯ç”¨ Hyper-Vï¼ŒåŒ…æ‹¬ä½¿ç”¨ Windows æ§åˆ¶é¢æ¿ã€PowerShell æˆ–ä½¿ç”¨éƒ¨ç½²æ˜ åƒæœåŠ¡å’Œç®¡ç†å·¥å…·ï¼ˆDISMï¼‰ã€‚ æœ¬æ–‡é€æ­¥è®²è§£æ¯ä¸ªé€‰é¡¹ã€‚

::: info å¤‡æ³¨
Hyper-V ä½œä¸ºå¯é€‰åŠŸèƒ½å†…ç½®äº Windows ä¸­ï¼Œæ— éœ€ä¸‹è½½ Hyper-Vã€‚
:::

#### æ£€æŸ¥ Windows ç³»ç»Ÿè¦æ±‚
Windows 10ï¼ˆä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆï¼‰ï¼Œæˆ– Windows 11ï¼ˆä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆï¼‰
å…·æœ‰äºŒçº§åœ°å€è½¬æ¢çš„ 64 ä½å¤„ç†å™¨ï¼ˆSLATï¼‰ã€‚
CPU æ”¯æŒ VM ç›‘è§†å™¨æ¨¡å¼æ‰©å±•ï¼ˆIntel CPU ä¸Šçš„ VT-cï¼‰ã€‚
æœ€å°å†…å­˜ä¸º 4 GBã€‚

::: info å¤‡æ³¨
æ— æ³•åœ¨ Windows 10 å®¶åº­ç‰ˆæˆ– Windows 11 å®¶åº­ç‰ˆä¸Šä½¿ç”¨æ­£å¸¸æ–¹æ³•å®‰è£… Hyper-V è§’è‰²ã€‚
:::

æœ‰å…³è¯¦ç»†ä¿¡æ¯å’Œæ•…éšœæ’é™¤ï¼Œè¯·å‚é˜… Windows Hyper-V ç³»ç»Ÿè¦æ±‚ã€‚

#### ä½¿ç”¨ PowerShell å¯ç”¨ Hyper-V
åœ¨ Windows æ¡Œé¢ä¸Šï¼Œé€‰æ‹©â€œå¼€å§‹â€æŒ‰é’®å¹¶é”®å…¥åç§° Windows PowerShell çš„ä»»ä½•éƒ¨åˆ†ã€‚

å³é”®å•å‡» Windows PowerShellï¼Œç„¶åé€‰æ‹©â€œ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ã€‚

::: warning è­¦å‘Š
å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShellï¼Œå¦åˆ™å‘½ä»¤å°†å¤±è´¥ã€‚
:::

1.è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š
```powershell
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All
```
![enable-hyper-v-powershell](/assets/windows/enable-hyper-v-powershell.png)

2.è¾“å…¥ Y ï¼Œè®©è®¡ç®—æœºé‡å¯ä»¥å®Œæˆå®‰è£…ã€‚

### ä½¿ç”¨ CMD å’Œ DISM å¯ç”¨ Hyper-V
éƒ¨ç½²æ˜ åƒæœåŠ¡å’Œç®¡ç†å·¥å…·ï¼ˆDISMï¼‰å¯å¸®åŠ©é…ç½® Windows å’Œ Windows æ˜ åƒã€‚ åœ¨å…¶è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼ŒDISM å¯ä»¥åœ¨ä½œç³»ç»Ÿè¿è¡Œæ—¶å¯ç”¨ Windows åŠŸèƒ½ã€‚

è¦ä½¿ç”¨ DISM å¯åŠ¨ Hyper-V è§’è‰²ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1.åœ¨ Windows æ¡Œé¢ä¸Šï¼Œé€‰æ‹©â€œå¼€å§‹â€æŒ‰é’®å¹¶é”®å…¥åç§° Windows PowerShell çš„ä»»ä½•éƒ¨åˆ†ã€‚

2.å³é”®å•å‡» Windows PowerShellï¼Œç„¶åé€‰æ‹©â€œ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ã€‚

3.é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```powershell
DISM /Online /Enable-Feature /All /FeatureName:Microsoft-Hyper-V
```
![enable-hyper-v-dism](/assets/windows/enable-hyper-v-dism.png)

4.å¯ä»¥çœ‹åˆ°è¯¥åŠŸèƒ½å·²å¯ç”¨ï¼Œå¹¶ä¸”â€œæ“ä½œå·²æˆåŠŸå®Œæˆâ€ã€‚

### é€šè¿‡â€œè®¾ç½®â€å¯ç”¨ Hyper-V è§’è‰²
1.é€‰æ‹© â€œå¼€å§‹â€ï¼Œç„¶åæœç´¢å¹¶é€‰æ‹© â€œè®¾ç½®â€

2.é€‰æ‹© â€œåº”ç”¨â€å’Œâ€œåŠŸèƒ½â€ã€‚ ç„¶åé€‰æ‹© â€œç¨‹åºå’ŒåŠŸèƒ½â€

3.é€‰æ‹© æ‰“å¼€æˆ–å…³é—­çš„ Windows åŠŸèƒ½ã€‚

4.é€‰æ‹© Hyper-V ï¼Œç„¶åé€‰æ‹©â€œ ç¡®å®šâ€ã€‚

5.é‡æ–°å¯åŠ¨è®¡ç®—æœºä»¥å®Œæˆå®‰è£…ã€‚

### åœ¨ Windows 10 ä¸Šå¯ç”¨ Hyper-V
åœ¨ Windows 11 ä¸Šå¯ç”¨ Hyper-V
å¯¼èˆªåˆ°æ§åˆ¶é¢æ¿ã€‚ é€‰æ‹© â€œå¼€å§‹â€ï¼Œç„¶åæœç´¢ æ§åˆ¶é¢æ¿ ä»¥æ‰“å¼€è¯¥åº”ç”¨ç¨‹åºã€‚

1.é€‰æ‹© â€œç¨‹åºâ€ï¼Œç„¶åé€‰æ‹© â€œç¨‹åºå’ŒåŠŸèƒ½â€ã€‚

2.é€‰æ‹© â€œæ‰“å¼€æˆ–å…³é—­ Windows åŠŸèƒ½â€ã€‚

3.é€‰æ‹© Hyper-V ï¼Œç„¶åé€‰æ‹©â€œ ç¡®å®šâ€ã€‚
![enable-hyper-v](/assets/windows/enable-hyper-v.png)

å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¼šæç¤ºé‡å¯è®¡ç®—æœºã€‚

## ä½¿ç”¨ Hyper-V å®‰è£… Linux è™šæ‹Ÿæœº
### å®‰è£… Linux è™šæ‹Ÿæœº
1.æ‰“å¼€ Hyper-V ç®¡ç†å™¨ã€‚ é€‰æ‹© â€œå¿«é€Ÿåˆ›å»ºâ€ï¼Œç„¶åé€‰æ‹© Ubuntu 22.04 LTS 

2.é€‰æ‹© â€œåˆ›å»ºè™šæ‹Ÿæœºâ€ã€‚

3.ç­‰å¾…åˆ›å»ºå®Œæˆåå¯åŠ¨å¹¶è®¾ç½®ç³»ç»Ÿ

@[bilibili](BV1BqJizaEDs)

## å®‰è£… Nekro Agent
### æ–¹å¼ä¸€ï¼šæ ‡å‡†éƒ¨ç½²ï¼ˆæ¨èï¼‰

é›†æˆ Napcat åè®®ç«¯çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ç‰ˆæœ¬ï¼Œä¸€é”®å®Œæˆæ‰€æœ‰æœåŠ¡ç»„ä»¶ä¸åè®®ç«¯éƒ¨ç½²

```bash
sudo -E bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/nekro-agent/main/docker/quick_start_x_napcat.sh)"
```

å¦‚æœéƒ¨ç½²è¿‡ç¨‹å‡ºç°ç½‘ç»œé—®é¢˜æ— æ³•æ­£ç¡®ä¸‹è½½è„šæœ¬ï¼Œå¯ä½¿ç”¨å›½å†… GitCode åŠ é€Ÿéƒ¨ç½²å‘½ä»¤ï¼š

> æ³¨æ„: GitCode åŠ é€Ÿçš„éƒ¨ç½²æ–¹å¼ä¾èµ–äº GitCode åŒæ­¥é€Ÿåº¦ï¼Œå¯èƒ½æ— æ³•åŠæ—¶åŒæ­¥æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœ‰æ¡ä»¶å°½é‡ä½¿ç”¨ Github è„šæœ¬éƒ¨ç½²

```bash
sudo -E bash -c "$(curl -fsSL https://raw.gitcode.com/gh_mirrors/ne/nekro-agent/raw/main/docker/quick_start_x_napcat.sh)" - -g
```

::: warning æ³¨æ„äº‹é¡¹

- é»˜è®¤å®‰è£…ç›®å½•ï¼š`~/srv/nekro_agent`
- å¦‚éœ€ä¿®æ”¹å®‰è£…ç›®å½•ï¼šæ‰§è¡Œ `export NEKRO_DATA_DIR=<ä½ çš„ç›®å½•>`
- äº‘æœåŠ¡å™¨éœ€æ”¾è¡Œç«¯å£ï¼š
  - 8021ï¼šNekroAgent ä¸»æœåŠ¡
  - 6099ï¼šNapcat æœåŠ¡
- è¯·æ³¨æ„ä¿å­˜å®‰è£…è„šæœ¬ä¸­æä¾›çš„é¢æ¿ç™»é™†ä¿¡æ¯ï¼Œä»¥ä¾¿åç»­é…ç½®ä½¿ç”¨

:::
æŒ‰ç…§æç¤ºå®Œæˆéƒ¨ç½²åï¼ŒæŒ‰ç…§[åè®®ç«¯é…ç½®](/docs/02_quick_start/config/protocol.html#napcat-é›†æˆéƒ¨ç½²-æ¨è)æ–‡æ¡£è¯´æ˜å®Œæˆé…ç½®

### æ–¹å¼äºŒï¼šæ ¸å¿ƒéƒ¨ç½²

ä»…éƒ¨ç½² NekroAgent æ ¸å¿ƒæœåŠ¡ç»„ä»¶ï¼Œéœ€è¦è‡ªè¡Œé…ç½® OneBot V11 åè®®ç«¯ã€‚

```bash
sudo -E bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/nekro-agent/main/docker/quick_start.sh)"
```

ç›‘å¬çš„åè®®ç«¯è¿æ¥åœ°å€ï¼š`ws://<ä½ çš„æœåŠ¡ip>:8021/onebot/v11/ws`

### éƒ¨ç½²åé…ç½®

å‰å¾€[åè®®ç«¯é…ç½®](/docs/02_quick_start/config/protocol)æ–‡æ¡£ï¼Œæ ¹æ®æ–‡æ¡£è¯´æ˜å®Œæˆé…ç½®ã€‚
